# React ä¸ Hook åº”ç”¨ï¼šå®ç°é¡¹ç›®åˆ—è¡¨

## çŠ¶æ€æå‡

- useState
- useEffect
- ç»„ä»¶ç»„åˆ

## Custom Hook æå–å¹¶å¤ç”¨ç»„ä»¶ä»£ç 

Custom Hook æ˜¯ React ä¸­æœ€æ–°ä¹Ÿæ˜¯æœ€ä¼˜ç§€çš„ç»„ä»¶ä»£ç å¤ç”¨æ–¹æ¡ˆ

- useMount
- useDebounce

```js
export const useMount = (callback) => {
  useEffect(() => {
    callback();
  }, []);
};
```

```js
export const useDebounce = (value, delay) => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    // æ¯æ¬¡åœ¨valueå˜åŒ–ä»¥åï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨
    const timeout = setTimeout(() => setDebouncedValue(value), delay);
    // æ¯æ¬¡åœ¨ä¸Šä¸€ä¸ªuseEffectå¤„ç†å®Œä»¥åå†è¿è¡Œ
    return () => clearTimeout(timeout);
  }, [value, delay]);

  return debouncedValue;
};
```

## ä¸ºä»€ä¹ˆreactåˆ—è¡¨è¦åŠ  key

### ä¸ºä»€ä¹ˆåˆ—è¡¨è¦åŠ  key å±æ€§ï¼Œä»¥åŠä¸ºä»€ä¹ˆç”¨ index æ˜¯ä¸å¥½çš„

éå†å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§æ·±åº¦å¯¹æ¯”æ˜¯éå¸¸æµªè´¹æ€§èƒ½çš„

React ä½¿ç”¨åˆ—è¡¨çš„keyæ¥è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œå°±é»˜è®¤ä¸º index ä¸‹æ ‡

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ ä¸æŒ‡å®š key/ç”¨ index ä¸‹æ ‡ æ˜¯ä¸å¥½çš„å‘¢ï¼Ÿ

å‡è®¾ç°åœ¨æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š

```js
const users = [{ username: "bob" }, { username: "sue" }];

users.map((u, i) => <div key={i}>{u.username}</div>);
```

å®ƒä¼šæ¸²æŸ“å‡ºè¿™ä¸ª DOM æ ‘ï¼š

```js
<div key="1">bob</div>
<div key="2">sue</div>
```

ç„¶åç”¨æˆ·åšäº†æŸä¸ªæ“ä½œï¼Œusers è¢« unshift å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå˜æˆï¼š

```js
const users = [
  { username: "new-guy" },
  { username: "bob" },
  { username: "sue" },
];
```

DOM æ ‘å°±ä¼šå˜æˆè¿™æ ·ï¼Œæ³¨æ„keyçš„å˜åŒ–ï¼š

```js
<div key="1">new-guy</div>
<div key="2">bob</div>
<div key="3">sue</div>
```

DOM æ ‘çš„å‰åå¯¹æ¯”æ˜¯è¿™æ ·çš„ï¼š

```js
<div key="1">bob</div>   |  <div key="1">new-guy</div>
<div key="2">sue</div>   |  <div key="2">bob</div>
                         |  <div key="3">sue</div>
```

æˆ‘ä»¬çœ‹å¾—å‡ºæ¥å‰åçš„å˜åŒ–åªæ˜¯åœ¨å¼€å¤´åŠ äº†ä¸€ä¸ªnew-guyè€Œå·²

ä½†æ˜¯ç”±äº React ä½¿ç”¨ key å€¼æ¥è¯†åˆ«å˜åŒ–ï¼Œæ‰€ä»¥ React è®¤ä¸ºçš„å˜åŒ–æ˜¯ï¼š

1. bob -> new-guy
1. sue -> bob
1. æ·»åŠ  sue

éå¸¸æ¶ˆè€—æ€§èƒ½ ğŸ˜­

ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸€å¼€å§‹å°±ç»™å®ƒæŒ‡å®šä¸€ä¸ªåˆé€‚çš„ keyï¼Œæ¯”å¦‚ç”¨ nameï¼š

```js
users.map((u, i) => <div key={u.username}>{u.username}</div>);
```

React è®¤ä¸ºçš„å˜åŒ–å°±å˜æˆï¼š

```js
                         |  <div key="1">new-guy</div>
<div key="1">bob</div>   |  <div key="2">bob</div>
<div key="2">sue</div>   |  <div key="3">sue</div>
```

è¿™æ ·åªéœ€è¦åšä¸€ä¸ªunshiftæ“ä½œï¼Œæ€§èƒ½èŠ‚çœ ğŸ˜ƒ
